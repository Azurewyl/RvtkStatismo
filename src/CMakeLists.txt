cmake_minimum_required(VERSION 2.6)
#set(VTK_DIR ".")
## GET R-specific ENV variables
set(R_HOME $ENV{R_HOME})
SET(RLIB "${R_HOME}/lib")
set (RSCRIPT "${R_HOME}/bin/Rscript")
set(RCPP_DIR "$ENV{RCPP_DIR}/include")
set(R_INCLUDE_DIR "$ENV{R_INCLUDE_DIR}")

set(CXX "$ENV{CXX}")
set(CXXFLAGS "$ENV{CXXFLAGS}")
set(CPPFLAGS "$ENV{CPPFLAGS}")
set(BLAS_LIBS "$ENV{BLAS_LIBS}")
set(LAPACK_LIBS "$ENV{LAPACK_LIBS}")

## set variables accordingly
set(CMAKE_CXX_FLAGS "${CXXFLAGS}")
set(CMAKE_C_FLAGS "${CPPFLAGS} ${CFLAGS}")
SET(CMAKE_CXX_COMPILER::string "${CXX}")
SET(CMAKE_VERBOSE_MAKEFILE OFF)
project(Rvtk CXX)
find_package(VTK REQUIRED)
LINK_DIRECTORIES(${RLIB})
include_directories(${R_INCLUDE_DIR} ${RCPP_DIR})
include(${VTK_USE_FILE})
add_library(Rvtk SHARED R2vtk.cpp readVTP.cpp vtkVisualize.cpp writeToVTK.cpp)
set(CMAKE_SHARED_LINKER_FLAGS "${BLAS_LIBS} ${LAPACK_LIBS}")
if (WIN32)
  set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -static-libstdc++")
endif()
target_link_libraries(Rvtk ${VTK_LIBRARIES} R)

